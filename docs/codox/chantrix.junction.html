<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><link href="css/default.css" rel="stylesheet" type="text/css" /><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><script src="js/highlight.min.js" type="text/javascript"></script><link href="css/highlight.css" rel="stylesheet" type="text/css" /><script>hljs.initHighlightingOnLoad();</script><title>chantrix.junction documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Chantrix</span> <span class="project-version">0.1.7</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>chantrix</span></div></div></li><li class="depth-2 branch"><a href="chantrix.async.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>async</span></div></a></li><li class="depth-2 branch"><a href="chantrix.control.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>control</span></div></a></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>http</span></div></div></li><li class="depth-3"><a href="chantrix.http.kit.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>kit</span></div></a></li><li class="depth-2 branch current"><a href="chantrix.junction.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>junction</span></div></a></li><li class="depth-2"><a href="chantrix.trace.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>trace</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="chantrix.junction.html#var-.3E.21.21.3C"><div class="inner"><span>&gt;!!&lt;</span></div></a></li><li class="depth-1"><a href="chantrix.junction.html#var-.3E.21.3C"><div class="inner"><span>&gt;!&lt;</span></div></a></li><li class="depth-1"><a href="chantrix.junction.html#var-close.21"><div class="inner"><span>close!</span></div></a></li><li class="depth-1"><a href="chantrix.junction.html#var-compose"><div class="inner"><span>compose</span></div></a></li><li class="depth-1"><a href="chantrix.junction.html#var-context"><div class="inner"><span>context</span></div></a></li><li class="depth-1"><a href="chantrix.junction.html#var-junc"><div class="inner"><span>junc</span></div></a></li><li class="depth-1"><a href="chantrix.junction.html#var-mult"><div class="inner"><span>mult</span></div></a></li><li class="depth-1"><a href="chantrix.junction.html#var-mult-pipe"><div class="inner"><span>mult-pipe</span></div></a></li><li class="depth-1"><a href="chantrix.junction.html#var-pipe"><div class="inner"><span>pipe</span></div></a></li><li class="depth-1"><a href="chantrix.junction.html#var-pipe-junc"><div class="inner"><span>pipe-junc</span></div></a></li><li class="depth-1"><a href="chantrix.junction.html#var-pipe-tap"><div class="inner"><span>pipe-tap</span></div></a></li><li class="depth-1"><a href="chantrix.junction.html#var-transact.21"><div class="inner"><span>transact!</span></div></a></li><li class="depth-1"><a href="chantrix.junction.html#var-transact.21.21"><div class="inner"><span>transact!!</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">chantrix.junction</h1><div class="doc"><pre class="plaintext">chantrix channel junction api
. encapsulates a two-way communication mechanism via a channel pair
. externally, writes go to the first channel, reads come from the second
. useful for representing fully async request/response channels
. middleware can be stacked by composing a junction onto another junction
. either side of a junction can be independently buffered and/or transduced</pre></div><div class="public anchor" id="var-.3E.21.21.3C"><h3>&gt;!!&lt;</h3><div class="usage"><code>(&gt;!!&lt; j input)</code></div><div class="doc"><pre class="plaintext">syntax sugar for transact!!
</pre></div><div class="src-link"><a href="https://github.com/chantrix/chantrix/blob/0.1.7/src/chantrix/junction.clj#L113">view source</a></div></div><div class="public anchor" id="var-.3E.21.3C"><h3>&gt;!&lt;</h3><h4 class="type">macro</h4><div class="usage"><code>(&gt;!&lt; j input)</code></div><div class="doc"><pre class="plaintext">syntax sugar for transact!
</pre></div><div class="src-link"><a href="https://github.com/chantrix/chantrix/blob/0.1.7/src/chantrix/junction.clj#L101">view source</a></div></div><div class="public anchor" id="var-close.21"><h3>close!</h3><div class="usage"><code>(close! j)</code></div><div class="doc"><pre class="plaintext">closes the channels in a junction
drains the write side, but doesn't drain the read side,
so that remaining messages can be retrieved successfully</pre></div><div class="src-link"><a href="https://github.com/chantrix/chantrix/blob/0.1.7/src/chantrix/junction.clj#L31">view source</a></div></div><div class="public anchor" id="var-compose"><h3>compose</h3><div class="usage"><code>(compose j &amp; kwargs)</code></div><div class="doc"><pre class="plaintext">composes a junction into a new junction,
applying buffers/transducers to its channels</pre></div><div class="src-link"><a href="https://github.com/chantrix/chantrix/blob/0.1.7/src/chantrix/junction.clj#L61">view source</a></div></div><div class="public anchor" id="var-context"><h3>context</h3><div class="usage"><code>(context j)</code><code>(context j request-path response-path)</code></div><div class="doc"><pre class="plaintext">creates a context junction, used to mux/demux
requests and responses over an existing junction
. assumes messages are clojure maps
. specify the map traversal keys in the request-path and
  response-path parameters to indicate the location of
  the context id within the respective request and response
  (via assoc-in/get-in)
. by default, the traversal keys are assumed to be the same
  in requests and responses - [:context]</pre></div><div class="src-link"><a href="https://github.com/chantrix/chantrix/blob/0.1.7/src/chantrix/junction.clj#L145">view source</a></div></div><div class="public anchor" id="var-junc"><h3>junc</h3><div class="usage"><code>(junc &amp; kwargs)</code></div><div class="doc"><pre class="plaintext">creates a new channel junction
:buf    default buffer for both channels
:&gt;buf   buffer for the write channel
:&lt;buf   buffer for the read channel
:&gt;xform transducer for the write channel
:&lt;xform transducer for the read channel</pre></div><div class="src-link"><a href="https://github.com/chantrix/chantrix/blob/0.1.7/src/chantrix/junction.clj#L19">view source</a></div></div><div class="public anchor" id="var-mult"><h3>mult</h3><div class="usage"><code>(mult j)</code></div><div class="doc"><pre class="plaintext">multiplexes the read side of a junction into a new junction
</pre></div><div class="src-link"><a href="https://github.com/chantrix/chantrix/blob/0.1.7/src/chantrix/junction.clj#L71">view source</a></div></div><div class="public anchor" id="var-mult-pipe"><h3>mult-pipe</h3><div class="usage"><code>(mult-pipe &amp; kwargs)</code></div><div class="doc"><pre class="plaintext">creates a new junction whose read side is piped and multiplexed
</pre></div><div class="src-link"><a href="https://github.com/chantrix/chantrix/blob/0.1.7/src/chantrix/junction.clj#L77">view source</a></div></div><div class="public anchor" id="var-pipe"><h3>pipe</h3><div class="usage"><code>(pipe j &amp; kwargs)</code></div><div class="doc"><pre class="plaintext">routes the write side of a junction to its read side,
optionally buffering/transducing the messages flowing between</pre></div><div class="src-link"><a href="https://github.com/chantrix/chantrix/blob/0.1.7/src/chantrix/junction.clj#L42">view source</a></div></div><div class="public anchor" id="var-pipe-junc"><h3>pipe-junc</h3><div class="usage"><code>(pipe-junc &amp; kwargs)</code></div><div class="doc"><pre class="plaintext">creates a new junction whose input is routed to its output,
with an optional buffer/transducer</pre></div><div class="src-link"><a href="https://github.com/chantrix/chantrix/blob/0.1.7/src/chantrix/junction.clj#L53">view source</a></div></div><div class="public anchor" id="var-pipe-tap"><h3>pipe-tap</h3><div class="usage"><code>(pipe-tap j &amp; kwargs)</code></div><div class="doc"><pre class="plaintext">pipes the left side, and taps the right side of a multiplexed
junction into a new junction</pre></div><div class="src-link"><a href="https://github.com/chantrix/chantrix/blob/0.1.7/src/chantrix/junction.clj#L82">view source</a></div></div><div class="public anchor" id="var-transact.21"><h3>transact!</h3><h4 class="type">macro</h4><div class="usage"><code>(transact! j input)</code></div><div class="doc"><pre class="plaintext">writes a request to the write side of a junction, and reads a
response from the other side, throwing if the response is an exception
returns nil if either channel was closed</pre></div><div class="src-link"><a href="https://github.com/chantrix/chantrix/blob/0.1.7/src/chantrix/junction.clj#L92">view source</a></div></div><div class="public anchor" id="var-transact.21.21"><h3>transact!!</h3><div class="usage"><code>(transact!! j input)</code></div><div class="doc"><pre class="plaintext">thread version of transact!
</pre></div><div class="src-link"><a href="https://github.com/chantrix/chantrix/blob/0.1.7/src/chantrix/junction.clj#L106">view source</a></div></div></div></body></html>